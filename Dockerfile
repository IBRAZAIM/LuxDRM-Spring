# Использование официального образа OpenJDK в качестве базового образа
# Рекомендуется использовать образ на основе Alpine для меньшего размера
FROM eclipse-temurin:21-jre-focal
# Создание каталога приложения внутри контейнера
WORKDIR /app

# (Опционально) Запуск команды сборки Maven или Gradle для создания JAR-файла
# ПРЕДПОЛАГАЕТ, что JAR-файл уже создан локально!
# Если вы используете Render для СБОРКИ, этот шаг должен быть в Render Build Command.
# Если вы собрали JAR локально, пропустите build command в Render и используйте:

# Копирование собранного JAR-файла в контейнер
# Замените 'target/your-app-name.jar' на фактический путь и имя вашего JAR
COPY target/your-app-name.jar app.jar

# Spring Boot по умолчанию слушает порт 8080.
# Render требует, чтобы приложение слушало предоставленный им порт ($PORT).
# Мы передадим порт через ENV, а Spring Boot настроит его, если вы используете ${PORT:8080}
EXPOSE 8080

# Команда для запуска приложения
ENTRYPOINT ["java", "-jar", "app.jar"]